
As organizations adopt **microservices and cloud-native architectures**, applications are decomposed into multiple independent services that interact over APIs. Each of these services needs to ensure that only authenticated and authorized entities (users, applications, or machines) can access protected resources. 

Without a centralized **Identity and Access Management (IAM) system**, every service would need to implement its own authentication and authorization logic, resulting in inconsistent security practices, duplicated effort, and operational overhead. 

To address this, we are tasked with designing a **scalable IAM system** that acts as the centralized authentication and authorization layer for a distributed architecture.

![security](security.png)

---
### Functional Requirements

The following are the core functional requirements of the system:

1. **Account Management**: Support creating new user and service accounts, handle email verification, password resets, and account recovery. 

2. **Session and Token Management**: Enable secure login flows (OAuth 2.1/OIDC), issuing short-lived access tokens with rotating refresh tokens, supporting logout, token introspection, and session revocation. 

3. **Route Protection**: Validate tokens, check scopes and roles, and integrate with a policy decision point for fine-grained authorization.

---
### Non-Functional Requirements

The following are the core non-functional requirements of the system:

1. The IAM system must be **scalable**, capable of supporting millions of daily authentication and authorization requests. 

2. It must maintain **high availability and reliability**, targeting 99.99% uptime, supporting multi-region deployments, and ensuring disaster recovery with RTO of 30 minutes and RPO of 5 minutes. From a **performance** perspective, token validation should complete within 50ms (p95), policy decisions within 200ms (p95), and revocation or policy changes must propagate across caches and gateways within five seconds to minimize stale access decisions.

3. The system must guarantee **strong consistency** for critical operations like account deactivation, token revocation, and policy updates, while using short TTLs on caches and decisions to balance consistency with high availability. 

4. **Security** is paramount: passwords must be stored with strong hashing (Argon2id or bcrypt), tokens must be signed with strong algorithms and rotated securely, refresh token reuse must be detected In addition, rate limiting, brute-force protection, and secure cookie attributes (HttpOnly, Secure, SameSite) must be enforced.

5. To meet **auditability and compliance** requirements, the system must log all authentication, authorization, and policy events with full metadata, ensure logs are tamper-evident, and integrate with SIEM tools while supporting compliance frameworks like GDPR, SOC2, and HIPAA. Logs should also support configurable long-term retention. 

6. The system must be **extensible and interoperable**, adopting open standards such as OAuth 2.1, OpenID Connect, SCIM, and WebAuthn, with integration capabilities for enterprise and social identity providers, and supporting RBAC with future extensions to ABAC or ReBAC.

7. Finally, the IAM system must be **maintainable and operable**, providing modular components for independent updates, metrics for observability, and APIs for managing users, sessions, and policies.

---












