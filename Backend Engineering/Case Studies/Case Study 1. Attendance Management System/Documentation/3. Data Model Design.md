
The **in-memory data model** for the **Attendance Management System** can be broken down into three subgroups:

1. **Global Registries** 
2. **Domain Objects**
3. **Data Transfer Objects (DTOs)**

Let’s discuss each in detail to understand their roles and responsibilities within the system.

---
### In-Memory Class Registry

Provide centralized, thread-safe in-memory storage of all `ClassEntity` instances. The `ConcurrentHashMap<String, ClassEntity>` maintained by `ClassServiceImpl` serves as the system’s single source of truth, ensuring consistent and efficient access to class data.

We can use a **`HashMap`** to provide an in-memory solution for storing classes, as it offers efficient key-based access and retrieval, making it well-suited for quick lookups. However, in a multi-user environment where <span style="color:green;font-weight:bold;background:beige;">multiple teachers may simultaneously add classes</span>, concurrency issues like data inconsistency, lost updates, and race conditions can arise if a regular **`HashMap`** is used.

To handle this, we can use a **`ConcurrentHashMap`** to store the classes.

```
private final Map<String, Class> classMap = new ConcurrentHashMap<>();
```

The `classMap` maps each **`classId`** (String) to its corresponding **`Class`** entity, forming the backbone of our in-memory class registry.

---
### Domain Objects

Represent the core entities such as `ClassEntity`, `StudentEntity` and `StudentAttendanceRecord`, responsible for modeling the real-world concepts of classes, students, and daily attendance.

<span style="color:purple;font-weight:bold;">ClassEntity</span>

Represents a **school class** and acts as the **primary container for both student and attendance registries**.

| **Field**            | **Type**                                        | **Description**                                |
| -------------------- | ----------------------------------------------- | ---------------------------------------------- |
| `id`                 | `String`                                        | Unique identifier for the class.               |
| `name`               | `String`                                        | Human-readable class name.                     |
| `teacherName`        | `String`                                        | Name of the assigned teacher.                  |
| `studentRegistry`    | `Map<String, StudentEntity>`                    | Registry of students, keyed by `enrollmentId`. |
| `attendanceRegistry` | `Map<LocalDate, List<StudentAttendanceRecord>>` | Registry of daily attendance, keyed by date.   |

> **NOTE:** Since **both `studentRegistry` and `attendanceRegistry` are scoped to a single `ClassEntity`**, they are not shared across multiple threads or teachers. Each teacher will only interact with their own class instance, so **a simple `HashMap` is sufficient** for both registries.

<span style="color:purple;font-weight:bold;">StudentEntity</span>

Represents a student enrolled in a class.

|**Field**|**Type**|**Description**|
|---|---|---|
|`enrollmentId`|`String`|Unique identifier for each student within a class.|
|`name`|`String`|Student’s full name.|

<span style="color:purple;font-weight:bold;">StudentAttendanceRecord</span>

Represents an **attendance mark** for a student.

|**Field**|**Type**|**Description**|
|---|---|---|
|`enrollmentId`|`String`|Identifier linking back to the corresponding `StudentEntity`.|
|`name`|`String`|Student’s name (stored redundantly for easier reporting and faster lookups).|
|`attendanceStatus`|`String`|Attendance status for the date (`PRESENT` / `ABSENT`).|

---
### Data Transfer Objects (DTOs)

Act as lightweight carriers for exchanging data across layers. These include `StudentAttendanceStats` and `ClassAttendanceReport`, which are primarily used for aggregating and presenting attendance information.

---

