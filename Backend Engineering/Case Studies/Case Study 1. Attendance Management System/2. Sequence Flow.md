
The **teacher (main actor)** is responsible for performing all **key actions (use cases)** such as **defining classes**, **adding students**, **marking attendance**, and **generating monthly reports**.

Let’s understand the **step-by-step sequence flow** of each use case to gain deeper insights into **how teachers interact with the system, how data flows during runtime, and how each feature functions within a memory-only environment**.

---
### Use Case 1: Create Class

A **`Teacher`** initiates the process by clicking the **"Create Class"** button from the UI. The UI displays the class creation form and prompts the teacher to enter class details such as **`className`** and **`teacherName`**. 

Upon submitting the form, the frontend sends a **`POST /createClass`** request to the **`AttendanceManagementSystem`**, including the input class details. 

The **`AttendanceManagementSystem`** extracts request parameters: **`className`** and **`teacherName`**, and invokes the **`createClass(className, teacherName)`** method within the **`ClassService`**. 

The **`createClass()`** method performs basic validations (e.g., check if **`className`** already exists), instantiates a new **`Class`** object: **`classObj`**  and invokes the **`save(classObj)`** method within the **`ClassRepository`**.

The **`save()`** method generates a unique **`classID`** and saves the **`classObj`** in the **in-memory** collection.

A success message is then returned to the UI, confirming that the class has been created.

```mermaid
sequenceDiagram
	participant T as Teacher
	participant UI as Frontend UI
	participant AMS as AttendanceManagementSystem<br/>(REST Controller)
	participant CS as ClassService
	participant CR as ClassRepository

	Note over T,CR: Create New Class - Complete Flow

	T->>+UI: Click "Create Class" button
	UI-->>-T: Display class creation form

	T->>+UI: Fill form and click Submit
	Note right of T: Enter details:<br/>Class Name: "Mathematics Grade 10"<br/>Teacher Name: "John Smith"

	UI->>+AMS: POST /createClass
	Note right of UI: Send HTTP request with payload:<br/>{ "className": "Mathematics Grade 10", "teacherName": "John Smith" }

	AMS->>+CS: createClass("Mathematics Grade 10", "John Smith")
	Note right of AMS: Delegate to service layer with extracted parameters

	alt Class already exists
		CS->>+CR: findByName("Mathematics Grade 10")
		CR-->>-CS: Class already exists
		CS-->>AMS: return error: "Class already exists"
		AMS-->>UI: return HTTP 409 Conflict
		UI-->>T: Show error: "Class already exists"
	else New class creation
		CS->>CS: classObj = new Class("Mathematics Grade 10", "John Smith")
		CS->>+CR: save(classObj)
		CR->>CR: generateClassId()
		Note right of CR: Generate unique class ID: <br/> "CLASS_0001"
		CR->>CR: classes.put("CLASS_0001", classObj)
		CR-->>-CS: return "CLASS_0001"
		CS-->>-AMS: return "CLASS_0001"
		AMS-->>-UI: Class created successfully with ID: "CLASS_0001"
		UI-->>-T: Show confirmation: "Class created successfully!"
	end
```

---
### Use Case 2: Add Student to Class

The **`Teacher`** begins the process by clicking the **"Add Student"** button from the UI. The frontend sends a **`GET request`** to the **`AttendanceManagementSystem`** to fetch the list of existing classes.

The UI displays a list of existing classes, from which the **`Teacher`** selects the desired class (e.g., "Mathematics Grade 10"). The UI then displays the student details form and prompts the teacher to enter student details such as **`studentName`** and **`rollNumber`**.

> **NOTE:** For **in-memory system**, where the teacher creates classes and adds students **per session**, it's better to **let the teacher input the roll number**. This provides more control and aligns well with existing school records or legacy systems.

Upon submitting the form, the frontend sends a **`POST /addStudent`** request to the **`AttendanceManagementSystem`**, including the selected **`classId`** and the student's information. 

The **`AttendanceManagementSystem`** extracts request parameters: **`classId`**, **`studentName`** and **`rollNumber`**, and invokes the **`addStudentToClass(classID,studentName,rollNumber)`** method within the **`ClassService`**.

The **`addStudentToClass()`** method performs basic validations, such as ensuring that the specified **`rollNumber`** does not already exist in the target class. If the validation succeeds, a new **`Student`** object: **`studentObj`** is created and added to the class’s **`studentMap<rollNumber, studentObj>`** collection via the **`ClassRepository`**. 

Finally, the **`AttendanceManagementSystem`** returns a success response to the UI, confirming the student was added.

```mermaid
sequenceDiagram
	participant T as Teacher
	participant UI as Frontend UI
	participant AMS as AttendanceManagementSystem<br/>(REST Controller)
	participant CS as ClassService
	participant CR as ClassRepository

	Note over T,CR: Add Student to Class - Complete Flow

	T->>+UI: Click "Add Student" button
	UI->>+AMS: GET /classes
	Note right of UI: Fetch all existing classes
	AMS->>+CS: getAllClasses()
	CS->>+CR: findAll()
	CR-->>-CS: return List<Class>
	CS-->>-AMS: return List<Class>
	AMS-->>-UI: HTTP 200 OK with class list
	UI-->>-T: Show "Student Details" form

	T->>+UI: Select class and enter student details
	Note right of T: Enter Details:<br/>Class ID: "CLASS_0001"<br/>Student Name: "Alice Johnson" <br/>Roll Number: "1"
	UI->>+AMS: POST /addStudent
	Note right of UI: Send HTTP request:<br/>{ "classId": "CLASS_0001",<br/> "studentName": "Alice Johnson",<br/> "rollNumber": "1" }
	AMS->>+CS: addStudentToClass("CLASS_0001", "Alice Johnson", "1")
	Note right of AMS: Delegate to service layer<br/>with extracted parameters
	CS->>+CR: findById("CLASS_0001")
	Note right of CS: Retrieve the target class<br/>from repository
	CR->>CR: classObj = classes.get("CLASS_0001")
	Note right of CR: Lookup class in<br/>in-memory storage
	CR-->>-CS: return classObj

	alt Roll Number already exists
		CS->>CS: classObj.getStudentMap().containsKey("1") == false
		CS-->>AMS: return error: "Roll Number already exists"
		AMS-->>UI: return HTTP 409 Conflict
		UI-->>T: Show error: "Roll Number already exists"
	else New student creation
		CS->>CS: studentObj = new Student("Alice Johnson", "1")
		CS->>CS: classObj.getStudentMap().put("1", studentObj)
		CS-->>-AMS: success
		AMS-->>-UI: HTTP 200 OK
		UI-->>-T: Show message: "Student added successfully"
	end
```

---
### Use Case 3: Mark Attendance



---
### Use Case 4: Generate Monthly Attendance Report


---
